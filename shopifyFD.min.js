(function(){if("undefined"!==typeof Shopify)if("undefined"!==typeof jQuery)if($("#shopifyjs").length)"function"===typeof Shopify.Flash.error&&Shopify.Flash.error("Error. ShopifyFD already loaded!");else{var r=document;if(1<r.URL.indexOf("myshopify.com/admin")){var b=function(){var t={debug:!1,drag_on:!1,alpha:!1,omega:!1,countries:!1,wait:1E3,api_count:0,api_limit:250,metafields:{},autosave:!1,content:$("#content"),body:$("body")};return{escape:function(b){return b.replace(/[\\]/g,"\\\\").replace(/[\"]/g,
'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")},redirect:function(b){if("undefined"!==typeof b&&"function"===typeof Turbolinks)try{Turbolinks.visit(b)}catch(c){return!1}},selectSort:function(b,c){return b.getAttribute("value")?c.getAttribute("value")?b.innerHTML>c.innerHTML?1:-1:1:-1},stripHTML:function(b){var c=document.createElement("div");c.innerHTML=b;return c.textContent||c.innerText},supportsHTML5Storage:function(){try{return"localStorage"in
window&&null!==window.localStorage}catch(b){return!1}},createCookie:function(b,c,d){if(d){var e=new Date;e.setTime(e.getTime()+864E5*d);d="; expires="+e.toGMTString()}else d="";document.cookie=b+"="+c+d+"; path=/"},readCookie:function(b){b+="=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null},notice:function(b,c){"function"===typeof Shopify.Flash.error&&"function"===
typeof Shopify.Flash.notice&&(c?Shopify.Flash.error(b):Shopify.Flash.notice(b))},about_app:function(){b.fd_modal(!0,'<p>ShopifyFD is "honor-ware", which means that we trust each other to be nice. As the developer of it, I\'m committed to keep the tool something that\'s actually useful. By releasing new features and correcting possible bugs on a constant basis I can do just that, but I need your support. If you use it and intend to keep it, please sponsor its development by making a small <a target="_blank" href="http://shopify.freakdesign.com.au/#donate">contribution</a>.</p><p>You can track changes by keeping an eye on the project page or following me on <a target="_blank" href="https://twitter.com/freakdesign">twitter</a>.</p><p><h4 style="margin-top:1em">Resources and links</h4><ul><li><a href="http://shopify.freakdesign.com.au" target="_blank">Project home page</a></li><li><a href="http://goo.gl/OsFK2d" target="_blank">Feature Request</a></li><li><a href="http://bit.ly/shopifyFD_forum" target="_blank">Shopify forum post</a></li></ul></p>',
"About this tool",!0);return!1},createbackup:function(a){if(a){var c=$("iframe").contents().find("#tinymce").html();$.ajax({type:"POST",url:r.URL+"/metafields.json",dataType:"json",data:{metafield:{namespace:"backups",key:a,value:c,value_type:"string"}},success:function(a){b.updatedropdown();b.notice("Backup saved")},error:function(a){a=JSON.parse(a.responseText);b.notice(a.errors.value[0],!0)}})}},loadmeta:function(a,c){var d="/admin/"+b.data("alpha")+"/"+b.data("omega")+"/metafields.json";"general"===
b.data("omega")&&(d="/admin/metafields.json");"articles"===b.data("alpha")&&(d="/admin/articles/"+b.data("omega")+"/metafields.json");$.getJSON(d,function(d){var f="";if(d=d.metafields){b.data("m",d);var g=b.data("datalistNamespace")||["global"],h=b.data("datalistKey")||[];"products"!==b.data("alpha")&&"collections"!==b.data("alpha")&&"pages"!==b.data("alpha")||b.setup_copypaste();var k=$("#metacount");k.text(d.length).addClass("active");0===d.length?k.removeClass("active"):k.addClass("active");for(var k=
0,n=d.length;k<n;k++)f+='<option data-type="'+d[k].value_type+'" data-id="'+d[k].id+'">'+d[k].namespace+"."+d[k].key+"</option>",c.metafields[d[k].id]={namespace:d[k].namespace,value:d[k].value,key:d[k].key},"backups"==d[k].namespace&&(b.flog("hasbackup!"),$("#restorebackup").show(),b.data("hasbackup",!0)),g.push(d[k].namespace),h.push(d[k].key);g=b.array_unique(g);h=b.array_unique(h);b.data("datalistNamespace",g);b.data("datalistKey",h);f='<select id="metafieldselect"><option value="">Select or create a metafield</option>'+
f+"</select>"}else f='<select id="metafieldselect"><option value="">Select or create a metafield</option></select>';a.html(f).append('<label style="margin-top:1em">Add New Metafield</label><input class="ssb" maxlength="20" type="text" id="metafield_namespace" placeholder="namespace" list="fd-dl-namespace"><datalist id="fd-dl-namespace"></datalist><input class="ssb" maxlength="30" type="text" id="metafield_key" placeholder="key" list="fd-dl-key"><datalist id="fd-dl-key"></datalist><textarea class="ssb" id="metafield_value" placeholder="value"></textarea><input type="hidden" id="metafield_id"><a class="btn btn-slim savemymeta" id="shopifyjs_savemetafield">Save</a> <a class="int btn btn-slim savemymeta" id="shopifyjs_savemetafield_int">Save as Integer</a> <a id="shopifyjs_copymetafield" class="btn btn-slim hidden btn-primary tooltip tooltip-bottom"><span class="tooltip-container"><span class="tooltip-label">Copy Metafield to Virtual Clipboard</span></span>Copy</a> <a class="btn btn-slim hidden delete tooltip tooltip-bottom" id="shopifyjs_deletemetafield"><span class="tooltip-container"><span class="tooltip-label">There is no undo. Be careful...</span></span>Delete</a><p style="margin-top:1em;line-height:1"><small><a id="advanced_meta_features" href="#">Toggle advanced features</a><br>Please note: Using the save button top right will NOT save these metafields. Be sure to click Save above.</small></p><div id="advanced_meta" class="hidden"><p style="border-bottom: 1px solid #ccc;">Handle Helper <a id="adv_clear_cache" style="float:right" href="#">Clear cache</a></p><p><a id="adv_get_collections" class="btn btn-slim" href="">Get collections</a></p><p><a id="adv_get_products" class="btn btn-slim" href="">Get products</a> <small>not suitable for large stores</small></p></div>');
for(k=0;k<g.length;k++)f=$("<option />",{value:g[k]}),$("#fd-dl-namespace").append(f);for(k=0;k<h.length;k++)f=$("<option />",{value:h[k]}),$("#fd-dl-key").append(f);$("#advanced_meta_features").off("click").on("click",function(){$("#advanced_meta").eq(0).toggleClass("hidden");return!1});$("#adv_clear_cache").off("click").on("click",function(){$("#advanced_meta").find("select").remove().end().find("a").show();b.data("products",!1);b.data("collections",!1);return!1});$("#adv_get_products").off("click").on("click",
function(){var a=$(this);if(b.data("products")){for(var c=b.data("products"),d="",e=$("<select />",{}).change(function(){var b=$(this);$("#metafield_value").val(b.val())}).html('<option value="">Add product handle as value</option>'),p=0,f=c.products.length;p<f;p++)d+='<option value="'+c.products[p].handle+'">'+c.products[p].title+"</option>";e.append(d);a.after(e).hide()}else $.ajax({type:"GET",url:"/admin/products.json?limit=250",dataType:"json",success:function(c){if(c.products.length){b.data("products",
c);for(var d="",l=$("<select />",{}).change(function(){var b=$(this);$("#metafield_value").val(b.val())}).html('<option value="">Add product handle as value</option>'),p=0,e=c.products.length;p<e;p++)d+='<option value="'+c.products[p].handle+'">'+c.products[p].title+"</option>";l.append(d);a.after(l).hide()}},fail:function(){b.notice("Failed to load products",!0)}});return!1});$("#adv_get_collections").off("click").on("click",function(){var a=$(this);if(b.data("collections")){for(var c=b.data("collections"),
d="",e=$("<select />",{}).change(function(){var b=$(this);$("#metafield_value").val(b.val())}).html('<option value="">Add collection handle as value</option>'),p=0,f=c.collections.length;p<f;p++)d+='<option value="'+c.collections[p].handle+'">'+c.collections[p].title+"</option>";e.append(d);a.after(e).hide()}else $.ajax({type:"GET",url:"/admin/collections.json?limit=250",dataType:"json",success:function(c){if(c.collections.length){b.data("collections",c);for(var d="",p=$("<select />",{}).change(function(){var b=
$(this);$("#metafield_value").val(b.val())}).html('<option value="">Add collection handle as value</option>'),e=0,l=c.collections.length;e<l;e++)d+='<option value="'+c.collections[e].handle+'">'+c.collections[e].title+"</option>";p.append(d);a.after(p).hide()}},error:function(){b.notice("Failed to load collections",!0)}});return!1});$("#metafieldselect").change(function(){var a=$(this).find(":selected");if(a.attr("data-id")){var d=c.metafields[a.attr("data-id")];a.attr("data-type");$("#metafield_namespace").val(d.namespace).prop("disabled",
!0);$("#metafield_key").val(d.key).prop("disabled",!0);$("#metafield_value").val(d.value);$("#metafield_id").val(a.attr("data-id"));$("#shopifyjs_deletemetafield").removeClass("hidden")}else b.clearmetaform()});$("#shopifyjs_deletemetafield").on("click",function(){var a=$("#metafield_id").val(),c=r.URL+"/metafields/"+a+".json";"general"===b.data("omega")&&(c="/admin/metafields/"+a+".json");"articles"===b.data("alpha")&&(c="/admin/articles/"+b.data("omega")+"/metafields/"+a+".json");a&&$.ajax({type:"DELETE",
url:c,success:function(a){b.flog(a);b.notice("Metafield deleted");b.updatedropdown()},error:function(a){b.notice("Failed to delete",!0)}})});$("div.sub_section-summary a.savemymeta").off("click").on("click",function(){var a="string";$(this).hasClass("int")&&(a="integer");var c=$("#metafield_namespace").val(),d=$("#metafield_key").val(),e=$("#metafield_value").val(),p=$("#metafield_id").val(),c={metafield:{namespace:c,key:d,value:e,value_type:a}},a={metafield:{id:p,value:e,value_type:a}};5<p.length?
(e=r.URL+"/metafields/"+p+".json","articles"===b.data("alpha")&&(e="/admin/articles/"+b.data("omega")+"/metafields/"+p+".json"),"general"===b.data("omega")&&(e="/admin/metafields/"+p+".json"),$.ajax({type:"PUT",url:e,dataType:"json",data:a,success:function(a){b.updatedropdown();b.flog(a);b.notice("Metafield updated")}})):(e=r.URL+"/metafields.json","general"===b.data("omega")&&(e="/admin/metafields.json"),"articles"===b.data("alpha")&&(e="/admin/articles/"+b.data("omega")+"/metafields.json"),$.ajax({type:"POST",
url:e,dataType:"json",data:c,success:function(a){b.updatedropdown();b.notice("Metafield saved")},error:function(a){a=JSON.parse(a.responseText);var c="";a.errors.namespace&&(c+="Namespace "+b.escape(a.errors.namespace[0])+". ");a.errors.key&&(c+="Key "+b.escape(a.errors.key[0])+". ");a.errors.value&&(c+="Value "+b.escape(a.errors.value[0])+". ");b.notice("Metafield failed to save: "+c,!0)}}));return!1})})},bulk_save_metafield_queue:function(a,c,d){$.ajax({type:"POST",url:"/admin/products/"+b.data("products")[c].id+
"/metafields.json",dataType:"json",data:a,success:function(e){d&&(e=d.val(),d.val(e+c+": "+b.data("products")[c].id+": ok\n"));c+1<b.data("products").length?b.bulk_save_metafield_queue(a,c+1,d):("products"==b.data("alpha")&&b.updatedropdown(),b.notice("Bulk changes done!"))}})},bulkmetafields:function(){var a=$('<h2 class="warning"><strong>ShopifyFD Warning:</strong> This section makes bulk changes to your product metafields. If something goes wrong it may adversely effect product metafields. There is no undo.</h2><table><tr><td>Namespace</td><td><input id="bulk_namespace" placeholder="Namespace" type="text" /></td></tr><tr><td>Key</td><td><input id="bulk_key" placeholder="Key" type="text" /></td></tr><tr><td>Value</td><td><input id="bulk_value" type="text" placeholder="value" /></td></tr><tr><td colspan="2"><p><strong>Note:</strong> Any existing metafield with the same namespace and key will be overwritten.</p></td></tr><tr><td><a class="btn create">Save</a> <a class="btn createint">Save Integer</a></td><td><span style="display:none"><a class="btn delete">Delete</a> <input type="text" style="width:50%" placeholder="Type delete" /></span></td></tr><tr><td colspan="2"><textarea class="debug" placeholder="Data Output (future use only)"></textarea></td></tr></table>'),
c=a.find("a.create"),d=a.find("a.createint");a.find("a.update");a.find("a.delete");var e=a.find("#bulk_namespace"),f=a.find("#bulk_key"),g=a.find("#bulk_value"),h=a.find("textarea.debug"),k=function(){return 1<e.val().length&&1<f.val().length&&1<g.val().length?!0:!1};c.off("click").on("click",function(){if(k){var a={metafield:{namespace:e.val(),key:f.val(),value:g.val(),value_type:"string"}};b.bulk_save_metafield_queue(a,0,h)}else b.notice("No empty fields allowed")});d.off("click").on("click",function(){if(k)if(isNaN(g.val()))b.notice("Value not an integer",
!0);else{h.val(b.data("products"));var a={metafield:{namespace:e.val(),key:f.val(),value:g.val(),value_type:"integer"}};b.bulk_save_metafield_queue(a,0,h)}else b.notice("No empty fields allowed",!0)});$.ajax({type:"GET",url:"/admin/products.json?limit=250&fields=id,title",dataType:"json",success:function(c){c.products&&(c.products.length?(b.data("products",c.products),b.fd_modal(!0,a,"Bulk Metafield editing (for "+c.products.length+" products)",!0)):b.notice("No products found",!0))},error:function(a){b.notice("Error getting products",
!0)}})},clearformatting:function(){var b=$("iframe").contents().find("#tinymce"),c=document.createElement("div");c.innerHTML=b.html();b.text(c.textContent||c.innerText||"")},clearmetaform:function(){$("#metafield_namespace").val("").prop("disabled",!1);$("#metafield_key").val("").prop("disabled",!1);$("#metafield_value").val("");$("#metafield_id").val("");$("#shopifyjs_deletemetafield").addClass("hidden")},supports_html5_storage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(b){return!1}},
kill_drag_drop:function(){if(b.data("drag_on")){var a=document.documentElement;a.className="";a.ondragover=function(){return!1};a.ondragleave=function(){return!1};a.ondragend=function(){return!1};a.ondrop=function(){}}},set_drag_drop:function(){if(b.data("drag_on")&&function(){var b=document.createElement("div");return"draggable"in b||"ondragstart"in b&&"ondrop"in b}()){b.flog("has dnd");var a=document.documentElement;a.ondragover=function(){this.className="dragit";return!1};a.ondragleave=function(){this.className=
"";return!1};a.ondragend=function(){this.className="";return!1};a.ondrop=function(a){a.preventDefault&&a.preventDefault();var d=a.dataTransfer.files,e=d.length,f=0,g=new FileReader,h={};g.onload=function(a){b.flog("load");a=a.target.result.split(",")[1];h[f]={name:d[f].name,data:a};f++;f<e?(b.notice("Reading file ["+(f+1)+"] contents..."),g.readAsDataURL(d[f])):b.do_upload(h)};e&&(document.documentElement.className="dragit",b.notice("Reading file ["+(f+1)+"] contents..."),g.readAsDataURL(d[f]));return!1}}},
do_upload:function(a){if(b.data("drag_on")){var c=Object.keys(a).length,d=0,e=b.data("themeID");"themes"==b.data("alpha")&&(e=b.data("omega"));"settings"!=b.data("omega")||isNaN(b.data("alpha"))||(e=b.data("alpha"));if(e){var f=function(){$.ajax({type:"PUT",url:"/admin/themes/"+e+"/assets.json",data:{asset:{key:"assets/"+a[d].name,attachment:a[d].data}},success:function(){b.notice(a[d].name+" uploaded ("+(d+1)+"/"+c+")");d++;d<c&&f();d==c&&(document.documentElement.className="")},error:function(){b.notice("File upload failed",
!0);document.documentElement.className=""}})};f()}else b.notice("Theme ID not found",!0)}},updateVariant:function(a,c,d){b.notice("Updating Variant "+(c+1)+"/"+a.length+"...");"undefined"===typeof c&&(c=0);"undefined"===typeof d&&(d=!1);$.ajax({type:"PUT",url:"/admin/variants/"+a[c].variant.id,dataType:"json",data:a[c],success:function(e){++c;c<a.length?b.updateVariant(a,c,d):(b.notice("Variants updated"),"function"===typeof d&&d())},error:function(){b.notice("Update failed",!0)}})},save_variant_metafield:function(a,
c,d,e,f,g){b.flog(a,c,d,e,f,g);var h="string";g&&(h="integer");f.length?(c={metafield:{id:f,value:e,value_type:h}},$.ajax({type:"PUT",url:"/admin/variants/"+a+"/metafields/"+f+".json",data:c,success:function(c){b.flog(c);b.setup_vrow(a);b.notice("Metafield updated")},error:function(c){b.setup_vrow(a);b.notice("Error saving",!0)}})):(c={metafield:{namespace:c,key:d,value:e,value_type:h}},$.ajax({type:"POST",url:"/admin/variants/"+a+"/metafields.json",data:c,success:function(c){b.flog(c);b.setup_vrow(a);
b.notice("Metafield saved")},error:function(c){b.setup_vrow(a);b.notice("Error Saving",!0)}}))},delete_variant_metafield:function(a,c){$.ajax({type:"DELETE",url:"/admin/variants/"+a+"/metafields/"+c+".json",success:function(c){b.flog(c);b.setup_vrow(a);b.notice("Metafield deleted")},error:function(c){b.setup_vrow(a);b.notice("Failed to delete",!0)}})},variant_fillfields:function(a){for(var c=0,d=b.data("vm").length;c<d;c++)if(o=b.data("vm")[c],parseInt(o.id)==parseInt(a))return o;return!1},setup_vrow:function(a){$("#mv_namespace").val("").prop("disabled",
!1);$("#mv_key").val("").prop("disabled",!1);$("#mv_value").val("");b.data("current_vid","");var c=function(b){return'<option class="meta" value="'+b.id+'">'+b.namespace+"."+b.key+"</option>"};a?$.ajax({type:"GET",url:"/admin/variants/"+a+"/metafields.json",success:function(d){$("#vrow option.meta").remove();if(m=d.metafields)b.data("vm",m),m.length?$("#vrow select").addClass("active"):$("#vrow select").removeClass("active");d=0;for(var e=m.length;d<e;d++)$("#vrow select").append(c(m[d]));$("#vrow .delete").hide();
$("#vrow .save").off("click").on("click",function(){b.data("current_vid")||b.data("current_vid","");b.save_variant_metafield(a,$("#mv_namespace").val(),$("#mv_key").val(),$("#mv_value").val(),b.data("current_vid"));return!1});$("#vrow .saveinteger").off("click").on("click",function(){b.data("current_vid")||b.data("current_vid","");b.save_variant_metafield(a,$("#mv_namespace").val(),$("#mv_key").val(),$("#mv_value").val(),b.data("current_vid"),!0);return!1});$("#vrow .delete").off("click").on("click",
function(){b.delete_variant_metafield(a,b.data("current_vid"));return!1});$("#vrow select").eq(0).off("change").change(function(){var a=$(this).val();b.data("current_vid",a);b.flog(b.data("vm"));if(a.length){if($("#mv_namespace").prop("disabled",!0),$("#mv_key").prop("disabled",!0),$("#vrow .delete").show(),a=b.variant_fillfields(a))$("#mv_namespace").val(a.namespace),$("#mv_key").val(a.key),$("#mv_value").val(a.value)}else $("#mv_namespace").prop("disabled",!1),$("#mv_key").prop("disabled",!1),$("#vrow .delete").hide()});
$("#vrow .mybuttons").fadeIn()},error:function(a){b.notice("Error grabbing metafields",!0)}}):b.notice("Could not find ID",!0)},panel_editvariantmeta:function(){$(".row.section.inventory .section-summary p").eq(0).after('<p class="box notice">To edit metafields for the variant click in the variant ID number field.</p>');var a=$("td.vid input");a.on("change",function(){var b=$(this);b.val(b.attr("data-val"))});a.on("click",function(){$("#vrow").remove();var a=$(this),d=a.attr("data-val");a.select();
b.flog(d);b.data("currentvrow",d);$("tr.variant.active").removeClass("active");a=a.parent().parent();tp_td=a.find("td").length+1;a.addClass("active").after('<tr id="vrow"><td colspan="'+tp_td+'"><div class="vbox fadein"><fieldset><select><option value="">Select or create a metafield</option></select><input id="mv_namespace" placeholder="namespace" /><input id="mv_key" placeholder="key" /><input id="mv_value" placeholder="value" /></fieldset><span class="mybuttons"><a class="save btn btn-slim" href="#">Save</a> <a class="btn btn-slim saveinteger" href="#">Save as Integer</a> <a title="Delete" class="delete ico ico-16 ico-delete" href="#">delete</a></span></div></td></tr>');
b.setup_vrow(d)})},btn_removealltags:function(){var a=$(".section.tags .section-summary").eq(0);a.length?(a.append('<a id="addalltags" href="#" class="btn animated fadein">Add all tags</a> <a id="removealltags" href="#" class="btn animated fadein">Remove all tags</a>'),$("#removealltags").on("click",function(){$("ul.tokenized-list").eq(0).find("a").click();return!1}),$("#addalltags").on("click",function(){$("ul.addtags").eq(0).find("span:not(.inactive)").click();return!1})):b.notice("ShopifyFD error : btn_removealltags : target html not found",
!0)},flog:function(a){b.data("debug")&&console.log(a)},fd_modal_update:function(b,c,d){b=$("#fdmodal");b.length&&b.remove()},fd_modal:function(a,c,d,e){b.flog("fdmodal");var f=$("#fdmodal");if(a){f.length&&f.remove();a=$('<div id="fdmodal" class="modalWindow"><div class="main content"><header></header></div></div>');d&&a.find("header").html("<h2>"+d+"</h2>");c&&(c=$("<div/>",{}).append(c),a.find("div.main.content").append(c));if(e)e=$('<a href="#" class="close-modal">&times;</a>'),e.on("click",function(){b.fd_modal(!1);
return!1}),a.find("header").prepend(e).end().fadeIn();else a.fadeIn().on("click",function(){b.fd_modal(!1)});$("body").append(a)}else f.off("click").remove()},restorebackup:function(a){a=$("iframe").contents().find("#tinymce");var c=b.data("m");if(c)for(var d=0,e=c.length;d<e;d++)"backups"==c[d].namespace&&(a.html(c[d].value),b.notice("Backup restored"));else b.notice("Error, nothing to restore",!0)},setup_discounts:function(){var a=$(".header-row .header-right").eq(0);if(a.length){var c=$("<ul/>",
{"class":"segmented",id:"discount_buttons"}),d=$("<li/>"),e=$("<a/>",{"class":"btn btn-separate disabled",href:"#"}).html("Bulk create").on("click",function(b){b.preventDefault()});d.append(e);c.append(d);a.prepend(c)}else b.notice("ShopifyFD error : setup_discounts : target html not found",!0)},setup_articles:function(){var a=$(".section.description .section-summary").eq(0);if(a.length){var c=a.find("a").eq(0).attr("href");a.after('<div class="sub_section-summary fadein"><h1>Metafields <span id="metacount" class="animated bounce">0</span></h1><div class="metafield-content content"><i class="ico ico-20 ico-20-loading"></i></div></div>').remove();
a=$("div.metafield-content");b.loadmeta(a,t);a=$("h1.header-main");a.length&&(c=$("<a />",{href:c,target:"_blank",style:"display: inline-block;vertical-align: top;",title:"View in Store"}),c.append('<i class="ico ico-20-svg ico-sidebar-bottom-website"></i>'),a.append(c))}else b.notice("ShopifyFD error : setup_articles : Metafield target HTML not found",!0)},setup_blogs:function(){var a=$("div.section.description");a.length?(a.after('<div class="section metafields"><div class="next-grid"><div class="next-grid__cell next-grid__cell--quarter"><div class="section-summary"><h1>Metafields</h1><p>Manage the metafields that belong to this collection.</p></div></div><div class="next-grid__cell"><div class="next-card"><div class="section-content" id="collection-metafields"><div class="next-card__section"><div class="sub_section-summary fadein"><h1>Metafields <span id="metacount" class="animated bounce">0</span></h1><div class="metafield-content content"><i class="ico ico-20 ico-20-loading"></i></div></div></div></div></div></div></div></div>'),
a=$("div.metafield-content"),b.loadmeta(a,t)):b.notice("ShopifyFD error : setup_blogs : target html not found",!0)},setup_rte:function(){if(b.data("hasbackup"))$("#restorebackup").show().on("click",function(){b.restorebackup(b.data("omega"));return!1});$("#clearformatting").on("click",function(){b.clearformatting();return!1});$("#createbackup").on("click",function(){b.createbackup(b.data("omega"));return!1});$("#save_images_to_meta").on("click",function(){b.save_images_to_meta();return!1})},save_images_to_meta:function(){var a=
$("iframe").contents().find("#tinymce").find("img");if(a&&a.length){var c="";a.each(function(b){var e=$(this).prop("src").replace(/https:/i,"");c+=e;b<a.length-1&&(c+=",")});$.ajax({type:"POST",url:r.URL+"/metafields.json",dataType:"json",data:{metafield:{namespace:"helpers",key:"images",value:c,value_type:"string"}},success:function(a){b.updatedropdown();b.notice("Images saved to metafield")},error:function(a){b.notice("Error saving",!0)}})}else b.notice("No images found",!0)},array_unique:function(b){b=
b.concat();for(var c=0;c<b.length;++c)for(var d=c+1;d<b.length;++d)b[c]===b[d]&&b.splice(d--,1);return b},setup_products_list:function(){var a=$(".header-right .segmented").eq(0);if(a.length){if(!$("#showsku").length){var c=$("<ul/>",{"class":"segmented",id:"showsku"}),d=$("<li/>"),e=$("<a/>",{"class":"btn animated fadein",href:"#",title:"Show SKU and Variant IDs"}).html("Show SKUs & ID").on("click",function(a){a.preventDefault();var c=[],d=$("#all-products td.name a");d.each(function(){c.push($(this).attr("href").split(/[/]+/).pop())});
if(c.length){var e=function(a,c){$.ajax({type:"GET",url:"/admin/products/"+a[c]+".json?fields=variants",dataType:"json",success:function(l){var f=l.product.variants[0].sku;l=l.product.variants[0].id;var g="";if(f||l)f&&(g='<span title="SKU" class="sku label animated fadein">'+f+"</span>"),d.eq(c).before(g+'<span title="VariantID" class="variant label animated fadein">'+l+"</span>");c+1<a.length?e(a,c+1):b.notice("SKUs and Variant IDs Loaded")}})};b.notice("Loading SKUs and Variant IDs, please wait...");
e(c,0)}});d.append(e);c.append(d);a.after(c)}}else b.notice("Error : setup_products_list : html not found",!0)},setup_themes:function(){$(".theme-store-cta-section").remove();for(var b=$(".published-theme-title"),c=$(".btn.btn-primary").eq(0).attr("href"),d=$("div.unpublished-box"),e=0;e<d.length;e++){var f=d[e].id.split("_").pop(),g=d.eq(e).find(".next-card__section.tc"),f=$("<div />",{"class":"theme-id"}).html('<span class="tooltip-bottom tooltip"><span class="tooltip-container"><span class="tooltip-label">Theme ID</span></span>'+
f+"</span>");g.append(f)}b.length&&"undefined"!==typeof c&&-1<c.indexOf("/admin/themes")&&(c=$("<span />",{"class":"theme-id published"}).text(c.split("/")[3]),b.append(c))},setup_link_lists_single:function(){var a=$(".header-row .header-right");a.length&&$.ajax({type:"GET",url:"/admin/link_lists.json",dataType:"json",success:function(c){if(c){link_lists=c.link_lists;c="";for(var d=0,e=link_lists.length;d<e;d++)b.data("omega")!==link_lists[d].id.toString()&&(c+='<option value="'+link_lists[d].id+
'">'+link_lists[d].title+"</option>");c=$("<select />",{"class":"header-select fadein"}).append("<option>Choose another linklist to edit</option>",c).change(function(){var a=$(this).val();a&&b.redirect("/admin/link_lists/"+a)});a.prepend(c)}},error:function(a){b.notice("Error loading linklist data",!0)}})},setup_link_lists:function(){var a=$(".next-card__section .next-grid__cell--no-flex"),c=function(){$.ajax({type:"GET",url:"/admin/collections.json?limit=250",dataType:"json",success:function(b){for(var a=
$.param({utf8:"\u2713","link_list[handle]":"all-collections","link_list[title]":"All Collections"}),c=[],d=0,e=b.collections.length;d<e;++d){c.push({position:d+1,title:b.collections[d].title,link_type:"collection",subject_id:b.collections[d].id});var g={};g["link_list[links][][position]"]=d+1;g["link_list[links][][title]"]=b.collections[d].title;g["link_list[links][][link_type]"]="collection";g["link_list[links][][subject_id]"]=b.collections[d].id;a+="&"+$.param(g)}f(a)},error:function(){b.notice("Error! Are you sure you have access to collections?",
!0)}});return!1},d=function(){$.ajax({type:"GET",url:"/admin/pages.json?limit=250",dataType:"json",success:function(b){for(var a=$.param({utf8:"\u2713","link_list[handle]":"all-pages","link_list[title]":"All Pages"}),c=[],d=0,e=b.pages.length;d<e;++d){c.push({position:d+1,title:b.pages[d].title,link_type:"page",subject_id:b.pages[d].id});var g={};g["link_list[links][][position]"]=d+1;g["link_list[links][][title]"]=b.pages[d].title;g["link_list[links][][link_type]"]="page";g["link_list[links][][subject_id]"]=
b.pages[d].id;a+="&"+$.param(g)}f(a)},error:function(){b.notice("Error! Are you sure you have access to pages?",!0)}});return!1},e=function(){$.ajax({type:"GET",url:"/admin/products/vendors.json",dataType:"json",success:function(b){for(var a=$.param({utf8:"\u2713","link_list[handle]":"all-vendors","link_list[title]":"All Vendors"}),c=[],d=0,e=b.vendors.length;d<e;++d){var g={position:d+1,title:b.vendors[d],link_type:"http",subject:"/collections/vendors?q="+encodeURIComponent(b.vendors[d].toLowerCase()).replace(/%20/g,
"+")},k={};k["link_list[links][][position]"]=d+1;k["link_list[links][][title]"]=b.vendors[d];k["link_list[links][][link_type]"]="http";k["link_list[links][][subject]"]="/collections/vendors?q="+encodeURIComponent(b.vendors[d].toLowerCase()).replace(/%20/g,"+");a+="&"+$.param(k);c.push(g)}f(a)}})},f=function(a){"undefined"!==typeof a&&$.ajax({type:"POST",url:"/admin/link_lists",data:a,success:function(a,c,d){(c=d.getResponseHeader("X-XHR-Redirected-To"))?(linklistID=c.split("/").pop(),isNaN(linklistID)?
b.notice("Error creating linklist - ID not returned",!0):(b.notice("Link list added"),b.redirect("/admin/link_lists/"+linklistID))):(linklistID=$(a).find("form").eq(0).attr("action").split("/").pop(),isNaN(linklistID)||(b.notice("Link list added"),b.redirect("/admin/link_lists/"+linklistID)))},error:function(){b.notice("Error creating linklist",!0)}})},g=$("<a/>",{href:"#","class":"tooltip-bottom tooltip",style:"margin-right:1.5em"}).html('<span class="tooltip-container"><span class="tooltip-label">Make a copy of this linklist</span></span>Copy').on("click",
function(a){a.preventDefault();var c=$(this);a=c.parent().find('a[href^="/admin/link_lists"]').eq(0);a.length?(c.addClass("btn is-loading no-btn"),href=a.attr("href").split("/").pop(),isNaN(href)||$.ajax({type:"GET",url:"/admin/link_lists/"+href,success:function(b){var a=$(b).find("#edit_link_list_"+href);a.length&&(a.find('input[name="_method"]').remove(),a.find('input[name="authenticity_token"]').remove(),b=a.find('input[name="link_list[title]"]'),b.val(b.val()+" [COPY]"),a.find('select[name="link_list[links][][link_type]"]').each(function(b){var c=
$(this).val();"collection"===c?(b=a.find('div[context="collectionPicker'+b+'"]').eq(0),c=b.attr("define").split(","),"undefined"!==typeof c[2]&&(c=parseInt(c[2].replace(/\D/g,"")),b.after('<input name="link_list[links][][subject_id]" value="'+c+'" />'))):"page"===c?(b=a.find('div[context="pagePicker'+b+'"]').eq(0),c=b.attr("define").split(","),"undefined"!==typeof c[2]&&(c=parseInt(c[2].replace(/\D/g,"")),b.after('<input name="link_list[links][][subject_id]" value="'+c+'" />'))):"product"===c&&(b=
a.find('div[context="productPicker'+b+'"]').eq(0),c=b.attr("define").split(","),"undefined"!==typeof c[2]&&(c=parseInt(c[2].replace(/\D/g,"")),b.after('<input name="link_list[links][][subject_id]" value="'+c+'" />')))}),f(a.serialize()))},error:function(a,d,e){c.removeClass("btn is-loading no-btn");b.notice(e,!0)}})):b.notice("Can not copy this linklist. ID was not found",!0)}),h=$("<a />",{href:"#","class":"tooltip-bottom tooltip",style:"margin-right:1.5em"}).html('<span class="tooltip-container"><span class="tooltip-label">Delete Linklist on click</span></span><i class="ico ico-14-svg ico-delete"></i>').on("click",
function(b){b.preventDefault();var a=$(this);b=a.parent().find('a[href^="/admin/link_lists"]').eq(0);b.length&&(a.addClass("btn is-loading no-btn"),href=b.attr("href").split("/").pop(),isNaN(href)||$.ajax({type:"POST",url:"/admin/link_lists/"+href,data:{utf8:"\u2713",_method:"delete"},success:function(b){a.removeClass("btn is-loading no-btn").closest(".next-grid__cell.next-grid__cell--half").addClass("disable").css({opacity:".2","pointer-events":"none"})}}))});1<a.length?(a.prepend(h,g),$.ajax({type:"GET",
url:"/admin/link_lists.json",dataType:"json",success:function(c){c&&(b.data("link_lists",c),link_lists=c.link_lists,a.each(function(b){$(this).parent().find("h3").append('<span class="fadein" style="color:#ccc;display: block;font-size: 11px;font-family: monospace;">'+c.link_lists[b].handle+"</span>")}))}})):a.prepend(g);var g=$(".section-summary").eq(0),h=$("<a/>",{"class":"btn tooltip-bottom tooltip",style:"margin-bottom:.5em",href:"#"}).html('<span class="tooltip-container"><span class="tooltip-label">Create a linklist with every collection</span></span>Create Collections linklist').on("click",
function(){$(this).addClass("is-loading disabled");c();return!1}),k=$("<a/>",{"class":"btn tooltip-bottom tooltip",style:"margin-bottom:.5em",href:"#"}).html('<span class="tooltip-container"><span class="tooltip-label">Create a linklist with every page</span></span>Create Pages linklist').on("click",function(){$(this).addClass("is-loading disabled");d();return!1}),n=$("<a/>",{"class":"btn tooltip-bottom tooltip",style:"margin-bottom:.5em",href:"#"}).html('<span class="tooltip-container"><span class="tooltip-label">Create a linklist with all vendors</span></span>Create Vendor linklist').on("click",
function(){$(this).addClass("is-loading disabled");e();return!1});g.length&&g.append("<br>",h,"<br>",k,"<br>",n);g=$('.section-summary a[href="/admin/link_lists/new"]');if(g.length&&(h=$("#link_lists .next-grid__cell header a:last-child"),h.length)){var q="";2<h.length&&(h.each(function(){var b=$(this),a=b.parent().parent().find("h3").text(),b=b.attr("href");a.length&&b.length&&(q+='<option value="'+b+'">'+a+"</option>")}),q.length&&(h=$("<select />",{style:"margin-top:1em;border-radius:3px;border-color: #D3D3D3;color: #479ccf;width: 100%"}).on("change",
function(){var a=$(this).val();a.length&&b.redirect(a)}).html('<option value="">Jump to linklist</option>'+q),k=$("<div />"),k.append(h,'<small style="display: block;background: #fff;padding: .5em;">Select a linklist to quickly jump to edit view. Useful for when you have many linklists...</small>'),g.after(k)))}},setup_collections:function(){b.data("collections",!1);var a=$(".header-right").eq(0);if(a.length){var c=$("<ul/>",{"class":"segmented"}),d=$("<li/>"),e=$("<a/>",{"class":"btn",style:"margin-left:.5em",
href:"#"}).text("Show Product Count").on("click",function(a){a.preventDefault();$.ajax({type:"GET",url:"/admin/collections.json?limit=250",dataType:"json",success:function(a){if(a.collections.length){b.data("collections",a);for(var c=a.collections.length-1;0<=c;c--){var d=$("#collections-results").find('a[href="/admin/collections/'+a.collections[c].id+'"]');0===d.find("span").length&&d.append('<span class="sku label">'+a.collections[c].products_count+"</span>")}}}})}),f=$("<a/>",{"class":"btn",href:"#",
title:"Add tags to entire collection"}).html("Bulk edit tags").on("click",function(){b.fd_modal(!0,'<div><div class="clearfix em"><div class="half">Choose a collection</div><div class="half"><select data-action="collection"><option value="">Loading, please wait...</option></select></div></div><div class="clearfix em"><div class="half">Choose an action</div><div class="half"><select data-action="action"><option value="add">Add</option><option value="set">Set</option><option value="remove">Remove</option><option disabled value="toggle">Toggle</option><option value="purge" style="background:red;color:#fff">DELETE ALL</option></select></div></div><div class="clearfix em"><div class="half">Set the tag</div><div class="half"><input /></div></div><div class="half"><a class="btn" data-action="update_tags">Update tags</a></div><div class="half"><small>Add: Adds tags to the existing ones<br>Set: Replaces tags with new ones<br>Remove: Removes matching tags<br>Toggle: Future Use, disabled...</small></div></div>',
"Edit tags for all products in a collection",!0);var a=$("#fdmodal"),c=a.find('select[data-action="action"]'),d=a.find("a").eq(1),e=a.find('select[data-action="collection"]'),f=a.find("input").eq(0);c.change(function(b){"purge"==c.val()||"set"==c.val()?("purge"==c.val()&&f.val("").attr("disabled","disabled"),d.addClass("delete")):(f.removeAttr("disabled"),d.removeClass("delete"))});var l=function(b,a,c,e){var f=b.products[a].id,g={product:{id:f,tags:c}};d.text(a+1+"/"+b.products.length);$.ajax({type:"PUT",
url:"/admin/products/"+f+".json",data:g,dataType:"json",success:function(d){++a;a<b.products.length?l(b,a,c,e):"function"===typeof e&&e()}})},v=function(b,a,c,e){if(b.products[a].tags){var f=c.replace(/, /g,",").split(","),g=b.products[a].tags.replace(/, /g,",").split(","),g=$(g).not(f).get()+"",f=b.products[a].id,g={product:{id:f,tags:g}};d.text(a+1+"/"+b.products.length);$.ajax({type:"PUT",url:"/admin/products/"+f+".json",data:g,dataType:"json",success:function(d){++a;a<b.products.length?v(b,a,
c,e):"function"===typeof e&&e()}})}else++a,a<b.products.length?v(b,a,c,e):"function"===typeof e&&e()},w=function(a,c,e,f){var g=e.replace(/, /g,",").split(","),l=a.products[c].tags.split(","),l=b.array_unique(g.concat(l))+"",g=a.products[c].id,l={product:{id:g,tags:l}};d.text(c+1+"/"+a.products.length);$.ajax({type:"PUT",url:"/admin/products/"+g+".json",data:l,dataType:"json",success:function(b){++c;c<a.products.length?w(a,c,e,f):f()}})};d.on("click",function(){e.val().length?("add"===c.val()&&f.val().length&&
$.ajax({type:"GET",url:"/admin/products.json?collection_id="+e.val()+"&fields=id,tags",dataType:"json",success:function(a){d.addClass("disabled");w(a,0,f.val(),function(){b.notice("Done. Tags have been added");d.text("Update tags").removeClass("disabled")})}}),"purge"!==c.val()&&"set"!==c.val()||$.ajax({type:"GET",url:"/admin/products.json?collection_id="+e.val()+"&fields=id",dataType:"json",success:function(a){d.addClass("disabled");l(a,0,f.val(),function(){b.notice("Done.");d.text("Update tags").removeClass("disabled")})}}),
"remove"===c.val()&&$.ajax({type:"GET",url:"/admin/products.json?collection_id="+e.val()+"&fields=id,tags",dataType:"json",success:function(a){d.addClass("disabled");v(a,0,f.val(),function(){b.notice("Matched tags have been removed.");d.text("Update tags").removeClass("disabled")})}})):b.notice("Choose a collection",!0);return!1});c.hide();$.ajax({type:"GET",url:"/admin/collections.json?limit=250",dataType:"json",success:function(a){if(a.collections.length){b.data("collections",a);for(var d="",f=
0,g=a.collections.length;f<g;f++)d+='<option value="'+a.collections[f].id+'">'+a.collections[f].title+"</option>";e.append(d).find("option:eq(0)").text("Select a collection");c.show()}}});return!1});d.append(f,e);c.append(d);a.prepend(c)}else b.notice("ShopifyFD error : setup_collections : target html not found")},setup_copypaste:function(){if(b.supportsHTML5Storage()){var a=$('<div><a class="btn btn-slim" id="fd_copymetafields">Copy All Metafields</a> <a class="btn btn-slim" id="fd_pastemetafields">Paste Metafields</a> <a class="btn btn-slim tooltip tooltip-bottom" href="#" id="fd_whatmetafields"><span class="tooltip-container"><span class="tooltip-label">View what is in the clipboard</span></span>?</a></div>'),
c=a.find("#fd_pastemetafields"),d=a.find("#fd_whatmetafields");a.find("#fd_copymetafields").on("click",function(a){a.preventDefault();"undefined"!==typeof b.data("m")?0<b.data("m").length?(localStorage.metafieldCopy=JSON.stringify(b.data("m")),b.notice(b.data("m").length+" Metafields copied"),c.show(),d.show()):b.notice("No metafields to copy",!0):(c.hide(),d.hide())});d.on("click",function(){if("undefined"!==typeof localStorage.metafieldCopy){var a="";try{m=JSON.parse(localStorage.metafieldCopy)}catch(c){m=
!1}if(m){for(var d=0,h=m.length;d<h;d++)var k=b.stripHTML(m[d].value),a=a+("<p><strong>"+m[d].namespace+"."+m[d].key+" ("+m[d].value_type+")</strong><br>"+k+"</p><hr>");b.fd_modal(!0,a,"In the virtual clipboard...")}else b.notice("Error reading virtual clipboard. Empty?",!0)}return!1});c.on("click",function(a){a.preventDefault();"undefined"!==typeof localStorage.metafieldCopy?(a=JSON.parse(localStorage.metafieldCopy),a.length?(b.data("m-copy",a),b.save_metafield_queue(b.data("m-copy"),0)):b.notice("Nothing to paste",
!0)):b.notice("Nothing to paste",!0)});"undefined"===typeof localStorage.metafieldCopy&&(c.hide(),d.hide());$("div.sub_section-summary").after(a)}},save_metafield_queue:function(a,c){"undefined"!==typeof a&&"undefined"!==typeof c&&(b.notice("Please wait whilst we paste the metafields"),$.ajax({type:"POST",url:r.URL+"/metafields.json",dataType:"json",data:{metafield:{namespace:a[c].namespace,key:a[c].key,value:a[c].value,value_type:a[c].value_type}},success:function(d){c+1<a.length?b.save_metafield_queue(a,
++c):(b.updatedropdown(),b.notice("All metafields pasted!"))}}))},setup_products:function(){clearInterval(b.data("autosave"));var a=$(".section.description .section-summary").eq(0),c=$(".header-row .header-right");if(a.length){var d=a.find("a").eq(0).attr("href");a.after('<div class="sub_section-summary fadein"><h1>Metafields <span id="metacount" class="animated bounce">0</span></h1><div class="metafield-content content"><i class="ico ico-20 ico-20-loading"></i></div></div>').remove();a=$("div.metafield-content");
b.loadmeta(a,t)}else b.notice("ShopifyFD error : setup_products : Metafield target HTML not found",!0);c.length?$.ajax({type:"GET",url:"/admin/products.json?limit=250&fields=id,title",dataType:"json",success:function(a){if(a){products=a.products;a="";var d=products.length;if(250>=d){for(var e=0;e<d;e++)b.data("omega")!==products[e].id.toString()&&(a+='<option value="'+products[e].id+'">'+products[e].title+"</option>");a=$("<select />",{"class":"header-select fadein"}).append("<option>Choose another product to edit</option>",
a).change(function(){var a=$(this).val();a&&b.redirect("/admin/products/"+a)});a.find("option").sort(b.selectSort).appendTo(a);c.prepend(a)}}},error:function(a){b.notice("Error loading linklist data",!0)}}):b.notice("ShopifyFD error : setup_products : Product switcher target HTML not found",!0);a=$(".section.collections .section-summary");if(a.length){var e=$("#product-custom-collections .remove a");if(e.length){var f=$("<a />",{"class":"btn"}).text("Remove from all").on("click",function(b){b.preventDefault();
e.trigger("click")});a.append(f)}}0===$("#rte_extra").length&&($("#product-description_iframecontainer").eq(0).after('<div id="rte_extra"><a class="btn btn-slim tooltip tooltip-bottom" id="clearformatting" href="#"><span class="tooltip-container"><span class="tooltip-label">Careful, this method is brutal...</span></span>Purge html</a> <a class="btn btn-slim tooltip tooltip-bottom" id="createbackup" href="#"><span class="tooltip-container"><span class="tooltip-label">Save contents as metafield</span></span>Create Backup</a> <a class="btn btn-slim" style="display:none;" id="restorebackup" href="#">Restore Backup</a> <a class="btn btn-slim tooltip tooltip-bottom" id="save_images_to_meta" href="#"><span class="tooltip-container"><span class="tooltip-label">Add image paths to a metafield</span></span>Images to Metafields</a></div>'),
$(".rtetools-buttons ul.fr").eq(1).append('<li><a id="autosave" tabindex="-1" class="btn btn-slim tooltip tooltip-bottom disabled" href="#"><span class="tooltip-container"><span class="tooltip-label">Enable Autosave</span></span>Autosave</a></li>'),b.setup_rte(),$("#autosave").on("click",function(){var a=!1;$(this).hasClass("rte-command-active")?(b.notice("Autosave disabled"),clearInterval(b.data("autosave"))):(a=$('#products-show header input[type="submit"]'),b.notice("Autosave enabled"),b.data("autosave",
setInterval(function(){a.length?a.click():(clearInterval(b.data("autosave")),a=null,b.notice("Autosave disabled"))},3E4)));$(this).toggleClass("rte-command-active");return!1}));b.btn_removealltags();var a=$("h1.header-main"),g={};a.length&&(d=$("<a />",{href:d,target:"_blank",style:"display: inline-block;vertical-align: top;",title:"View in Store"}),d.append('<i class="ico ico-20-svg ico-sidebar-bottom-website"></i>'),a.append(d));d=$(".section.inventory .section-summary").eq(0);if(d.length){var h=
d.find("a.btn"),k=$("<div />",{"class":"box notice hidden fadein",style:"margin-top: 1em;"}),n=$("<a />",{"class":"btn",style:"margin-left:1em"}).text("Bulk Edits");n.on("click",function(b){b.preventDefault();k.toggleClass("hidden")});k.html('<h3>Edit all variants</h3><p style="margin: .5em 0 1em;font-size: 12px;border-bottom: 1px solid #ccc;padding-bottom: .5em;">Bulk Editing comes with risks.</p><label style="margin-top:1.5em">Set Compare at Price<br><small>0 will clear the compare at price</small></label><input type="number" style="width:50%" value="0"> <a class="bulk-compare-save tooltip tooltip-bottom btn btn-slim"><span class="tooltip-container"><span class="tooltip-label">Save Compare at Price for all variants</span></span>Save</a>');
bulkCompareSaveBtn=k.find("a.bulk-compare-save");bulkCompareFields=k.find("input");bulkCompareSaveBtn.on("click",function(a){a.preventDefault();var c=$(this);c.addClass("is-loading").attr("style","margin-left:1em;text-indent: -9999px;");a=function(){c.removeClass("is-loading").attr("style","margin-left:1em")};var d=bulkCompareFields.val();if(isNaN(d)||"0"===d||""===d)d=null;if((d||null===d)&&"object"===typeof g)if(1<Object.keys(g).length)if(Object.keys(g).length===$("tr.variant").length){var e=[],
f;for(f in g){var k=g[f],h;for(h in k)k.hasOwnProperty(h)&&e.push({variant:{id:k[h],compare_at_price:d}})}e.length&&b.updateVariant(e,0,a)}else b.notice("Unexpected variant found.",!0);else b.notice("You only have 1 variant. No need to bulk edit",!0)});d.append(k)}else b.notice("ShopifyFD error : setup_products : Inventory target HTML not found",!0);$("#product-inner-variants th:last-child").length?($("#product-inner-variants th:last-child").before("<th>Variant ID</th>"),$("th.inventory.tc").text("#").prop("title",
"Quantity"),$("tr.variant").each(function(b){var a=$("td.sku input.mock-edit-on-hover").eq(b).prop("id").split(/[- ]+/).pop();g["variant_"+b]={id:a};$(this).find("td:last-child").before('<td class="vid tooltip tooltip-bottom"><input class="mock-edit-on-hover" data-action="selectall" data-val="'+a+'" type="text" value="'+a+'" /><span class="tooltip-container"><span class="tooltip-label">Click to edit Metafields</span></span></td>')}).promise().done(function(){b.panel_editvariantmeta()})):b.notice("ShopifyFD error : setup_products : Unexpected variant table HTML",
!0);a=$("table.product-collections").eq(0);a.length?a.find("tr").each(function(){var a=$(this).find("a").eq(0).attr("href").split("/").pop(),c=$("<a/>",{"class":"btn tooltip tooltip-bottom",href:"#"}).html('<span class="tooltip-container"><span class="tooltip-label">Set a metafield with this collection handle</span></span>Set as preferred').on("click",function(c){c.preventDefault();"undefined"!==a&&$.ajax({type:"GET",url:"/admin/collections/"+a+".json?fields=handle",dataType:"json",success:function(a){"undefined"!==
typeof a&&"undefined"!==typeof r.URL&&$.ajax({type:"POST",url:r.URL+"/metafields.json",dataType:"json",data:{metafield:{namespace:"collection",key:"preferred",value:a.collection.handle,value_type:"string"}},success:function(a){b.updatedropdown();b.notice("Preferred collection metafield saved")},error:function(a){a=JSON.parse(a.responseText);b.notice(a.errors.value[0],!0)}})},error:function(){b.notice("Failed to load collection",!0)}})});$(this).find("td.col-remove").prepend(c)}):b.notice("ShopifyFD error : setup_products : Unexpected collection table HTML",
!0);a=$("table.variants .bulk-actions").eq(0);if(a.length){var q=$("<a/>",{href:"#","class":"btn btn-slim hidden",style:"padding-left:.5em"}).text("Edit selected weights").on("click",function(){b.fd_modal(!0,'<label>New weight (grams)</label><input class="half" min="0" type="number" data-action="update-variant-weight" /><a data-action="update-variant-weight" href="#" class="btn btn-slim">Save</a><br><br><small>Note: You will need to reload this page before Shopify will show the new weight in the dashboard.</small>',
"Edit weight",!0);var a=$('a[data-action="update-variant-weight"]'),c=$('input[data-action="update-variant-weight"]');if(a.length&&c.length)a.on("click",function(){var d=$('tr.variant input[type="checkbox"]:checked');if(d.length&&!isNaN(c.val())){var e=[];d.each(function(){var b=$(this).parent().parent().find("td.vid").text();isNaN(b)||e.push(parseInt(b))});var f=function(d,e){$.ajax({type:"PUT",url:"/admin/variants/"+e[d],dataType:"json",data:{variant:{id:e[0],grams:c.val()}},success:function(c){++d;
d<e.length?f(d,e):(b.notice("Weight updated"),a.removeClass("is-loading").text("Save"))}})};a.addClass("is-loading").text("");f(0,e)}else b.notice("Did you set a weight?",!0);return!1});return!1});$("<span/>",{"class":"hidden"});a.append(q);$('tr.variant input[type="checkbox"]').on("change",function(){1<$('tr.variant input[type="checkbox"]:checked').length?q.removeClass("hidden"):q.addClass("hidden")})}else b.notice("ShopifyFD error : setup_products : unable to add bulk weight editor");d.length&&
"object"===typeof g&&1<Object.keys(g).length&&h.after(n)},setup_pages:function(){var a=$(".section.description .section-summary").eq(0);if(a.length){var c=a.find("a").eq(0).attr("href");a.after('<div class="sub_section-summary fadein"><h1>Metafields <span id="metacount" class="animated bounce">0</span></h1><div class="metafield-content content"><i class="ico ico-20 ico-20-loading"></i></div></div>').remove();a=$("div.metafield-content");b.loadmeta(a,t)}else b.notice("ShopifyFD error : setup_pages : Metafield target HTML not found",
!0);a=$("h1.header-main");a.length&&(c=$("<a />",{href:c,target:"_blank",style:"display: inline-block;vertical-align: top;",title:"View in Store"}),c.append('<i class="ico ico-20-svg ico-sidebar-bottom-website"></i>'),a.append(c));0===$("#rte_extra").length&&($("#page-content_ifr").eq(0).after('<div id="rte_extra"><a class="btn btn-slim tooltip tooltip-bottom" id="clearformatting" href="#"><span class="tooltip-container"><span class="tooltip-label">Careful, this method is brutal...</span></span>Purge html</a> <a class="btn btn-slim tooltip tooltip-bottom" id="createbackup" href="#"><span class="tooltip-container"><span class="tooltip-label">Save contents as metafield</span></span>Create Backup</a> <a class="btn btn-slim" style="display:none;" id="restorebackup" href="#">Restore Backup</a> <a class="btn btn-slim tooltip tooltip-bottom" id="save_images_to_meta" href="#"><span class="tooltip-container"><span class="tooltip-label">Add image paths to a metafield</span></span>Images to Metafields</a></div>'),
b.setup_rte());$(".header-row .header-right").length?$.ajax({type:"GET",url:"/admin/pages.json?limit=250&fields=id,title",dataType:"json",success:function(a){if(a){pages=a.pages;a="";for(var c=0,f=pages.length;c<f;c++)b.data("omega")!==pages[c].id.toString()&&(a+='<option value="'+pages[c].id+'">'+pages[c].title+"</option>");a=$("<select />",{id:"shopifyjs_llselect","class":"header-select fadein"}).append("<option>Choose another page to edit</option>",a).change(function(){var a=$(this).val();a&&b.redirect("/admin/pages/"+
a)});a.find("option").sort(b.selectSort).appendTo(a);$(".header-row .header-right").prepend(a)}},error:function(a){b.notice("Error loading page data",!0)}}):b.notice("ShopifyFD error : setup_pages : Page switcher target HTML not found",!0)},shipping_remove_all:function(a,c){0<=a?$.ajax({type:"DELETE",url:"/admin/countries/"+c[a].id+".json",dataType:"json",success:function(d){b.notice("removed "+c[a].name);a-=1;b.shipping_remove_all(a,c)}}):$.ajax({url:"/admin/settings/shipping",success:function(){$("div.shipping-rate-table").remove()}})},
save_new_rates_FIX:function(a,c,d){if("undefined"!==typeof c&&"undefined"!==typeof a[c]&&"undefined"!==typeof d){var e=d.data("cid"),f=a[c],g=f.type;"weight"==g?f.type="weight_based":"price"==g?f.type="price_based":(g="carrier",f.type="carrier_based");f.country_id=e;f.new_type=f.type;e={utf8:"\u2713",shipping_rate:f};b.notice('Pasting "'+f.name+'"...');$.ajax({type:"POST",url:"/admin/shipping_rates",data:e,success:function(e,f,g){d.parent().parent().find("table").append('<tbody><tr style="background:#efefef"><td>'+
a[c].name+"</td><td>New rate pasted.</td><td>"+a[c].price+"</td></tr></tbody>");c===a.length-1?b.notice("Paste complete"):(c++,b.save_new_rates_FIX(a,c,d))},error:function(a,c,d){b.notice("Error pasting. "+d,!0)}})}},save_new_rates:function(a,c,d){if("undefined"!==typeof a[c]){var e=a[c],f={},g=e.type,h="";delete e.type;"string"===typeof g?("weight"===g?(f={weight_based_shipping_rate:{}},f.weight_based_shipping_rate=e,h="/admin/weight_based_shipping_rates.json"):"price"===g?(f={price_based_shipping_rate:{}},
f.price_based_shipping_rate=e,h="/admin/price_based_shipping_rates.json"):"carrier"===g&&(f={carrier_shipping_rate_provider:{}},f.carrier_shipping_rate_provider=e,h="/admin/carrier_shipping_rate_providers.json"),$.ajax({type:"POST",url:h,dataType:"json",data:f,success:function(e){d.parent().parent().find("table").append('<tbody><tr style="background:#efefef"><td>'+a[c].name+"</td><td>New rate pasted.</td><td>"+a[c].price+"</td></tr></tbody>");c===a.length-1?b.notice("Paste complete"):(c++,b.save_new_rates(a,
c,d))},error:function(){b.notice("Error pasting.",!0)}})):b.notice("missing type: "+g,!0)}else b.notice("save_new_rates error - length",!0)},setup_shipping:function(a){if("undefined"!==typeof a){a=$("<div />",{"class":"box error animated fadein"}).html('Warning - The way that shipping rates are copied and pasted has recently changed. It has NOT been thoroughly tested. Be sure to test this feature BEFORE making bulk edits. See this <a target="_blank" href="https://ecommerce.shopify.com/c/shopify-apis-and-technology/t/dashboard-endpoints-failing-link-lists-shipping-files-etc-212161">related post</a>.');
$(".section.shipping-rates").eq(0).prepend(a);a=$("#settings-shipping header").eq(0);if(a.length){var c=$('<div class="header-right animated fadein"><div class="header-action"><a class="btn tooltip-bottom tooltip bulk-paste-btn disabled" href="#"><span class="tooltip-container"><span class="tooltip-label">Paste to selected countries</span></span>Bulk Paste</a> <a class="btn btn-separate tooltip-bottom tooltip bulk-options" href="#"><span class="tooltip-container"><span class="tooltip-label">Show bulk delete options</span></span>Bulk Delete Options</a> <a class="btn btn-separate tooltip-bottom tooltip export-as-json" href="#"><span class="tooltip-container"><span class="tooltip-label">Export countries</span></span>Export JSON</a></div></div>');
c.find("a.export-as-json").on("click",function(a){a.preventDefault();b.fd_modal(!0,'<textarea readonly style="min-height:300px">'+JSON.stringify(b.data("countries").countries)+'</textarea><p><br><a href="/admin/countries.json" target="_blank">View original JSON object in new window</a></p>',"Export all countries",!0)});c.find("a.bulk-options").on("click",function(){var a=$('<p class="box warning">This will delete ALL of your countries. There is no undo. Proceed at own risk!</p><div><div class="span1"><a href="#" class="btn delete_all delete">Delete</a></div><div class="span2"><p>The page may need to be reloaded to see the changes.</p></div></div>');
a.find("a.delete_all").on("click",function(){$.ajax({type:"GET",url:"/admin/countries.json",dataType:"json",success:function(a){a.countries.length&&(t.countries=a.countries,b.notice(a.countries.length+" countries returned"),b.shipping_remove_all(a.countries.length-1,a.countries))},error:function(){b.notice("Error removing country. Process stopped.",!0)}});return!1});b.fd_modal(!0,a,"Delete all countries",!0);return!1});a.append(c)}else b.notice("ShopifyFD error : setup_shipping");if($("div.shipping-rate-table").length===
b.data("countries").countries.length){var d=[],e=[],f=[],g=function(a,c,d){if(c.length){var e=[];$.ajax({type:"GET",url:"/admin/countries/"+a+".json",dataType:"json",success:function(a){var f=a.country.weight_based_shipping_rates,g=a.country.price_based_shipping_rates;a=a.country.carrier_shipping_rate_providers;for(var h=0,u=f.length;h<u;h++)e.push([f[h].id,"weight_based"]);h=0;for(u=g.length;h<u;h++)e.push([g[h].id,"price_based"]);h=0;for(u=a.length;h<u;h++)e.push([a[h].id,"carrier_based"]);h=0;
for(u=e.length;h<u;h++)$.ajax({type:"POST",url:"/admin/shipping_rates/"+e[h][0],data:{utf8:"\u2713",_method:"delete",shipping_rate:{type:e[h][1]}},success:function(b){},error:function(a){b.notice("Failed to replace rate",!0)}});b.save_new_rates_FIX(c,0,d)},fail:function(){b.notice("I failed to get the country.json",!0)}})}else b.notice("Missing items to add",!0)};$("div.shipping-rate-table").each(function(a){var c=$(this),n=$("<a/>",{href:"#","data-country":b.data("countries").countries[a].name,"data-cid":b.data("countries").countries[a].id,
"data-index":a,"class":"fadein btn btn-slim copyrates tooltip tooltip-bottom",style:"float:right;margin-right:.5em"}).html('<span class="tooltip-container"><span class="tooltip-label">Copy Rates to Memory</span></span>Copy rates').on("click",function(){var a=$(this);a.attr("data-index");var c=a.attr("data-country"),g=a.attr("data-cid");$("a.copyrates").removeClass("btn-primary");a.addClass("btn-primary");$.ajax({type:"GET",url:"/admin/countries/"+g+".json",dataType:"json",success:function(a){d=a.country.weight_based_shipping_rates;
e=a.country.price_based_shipping_rates;f=a.country.carrier_shipping_rate_providers;b.notice("Ready to paste "+c+".");$("a.bulkpaste, input.paste-checkbox").removeClass("hidden")},error:function(){b.notice("Error copying rates",!0)}});return!1}),q=$("<input />",{type:"checkbox",style:"float:right","class":"hidden paste-checkbox"});a=$("<a/>",{href:"#","data-country":b.data("countries").countries[a].name,"data-cid":b.data("countries").countries[a].id,"data-index":a,"class":"hidden fadein bulkpaste btn btn-slim tooltip tooltip-bottom",
style:"float:right;margin-right:.5em"}).html('<span class="tooltip-container"><span class="tooltip-label">Will replace ALL existing rates.</span></span>Paste rates (replace)').on("click",function(){var b=$(this),a=b.attr("data-cid"),c=d,h=e,k=f,q=[],n=0;b.parent().parent().find("tbody").remove();b.parent().find("a").addClass("hidden");for(var s=0,r=c.length;s<r;s++)c[s].country_id=a,delete c[s].id,c[s].type="weight",q[n]=c[s],n++;s=0;for(r=h.length;s<r;s++)h[s].country_id=a,delete h[s].id,h[s].type=
"price",q[n]=h[s],n++;s=0;for(r=k.length;s<r;s++)k[s].country_id=a,delete k[s].id,k[s].type="carrier",q[n]=k[s],n++;g(a,q,b);return!1});c=c.find('a[bind-event-click="addShippingRateModal.show()"]');if(c.length)c.after(n,a,q);else return b.notice("Error. Unable to add copy button.",!0),!1})}else b.notice("Mismatch in country count. Reload this page.",!0)}else b.notice("Loading current country list"),$.ajax({type:"GET",url:"/admin/countries.json",dataType:"json",success:function(a){a.countries.length&&
(b.data("countries",a),b.notice(a.countries.length+" countries loaded"),b.setup_shipping(!0))},error:function(){b.notice("Loading failed",!0)}})},setup_custom_collections:function(){var a=$("div.section.products").eq(0);a.length?(a.after('<div class="section metafields"><div class="next-grid"><div class="next-grid__cell next-grid__cell--quarter"><div class="section-summary"><h1>Metafields</h1><p>Manage the metafields that belong to this collection.</p></div></div><div class="next-grid__cell"><div class="next-card"><div class="section-content" id="collection-metafields"><div class="next-card__section"><div class="sub_section-summary fadein"><h1>Metafields <span id="metacount" class="animated bounce">0</span></h1><div class="metafield-content content"><i class="ico ico-20 ico-20-loading"></i></div></div></div></div></div></div></div></div>'),
a=$("div.metafield-content"),b.loadmeta(a,t),0===$("#rte_extra").length&&($("#collection-description_iframecontainer").eq(0).after('<div id="rte_extra"><a class="btn btn-slim tooltip tooltip-bottom" id="clearformatting" href="#"><span class="tooltip-container"><span class="tooltip-label">Careful, this method is brutal...</span></span>Purge html</a> <a class="btn btn-slim tooltip tooltip-bottom" id="createbackup" href="#"><span class="tooltip-container"><span class="tooltip-label">Save contents as metafield</span></span>Create Backup</a> <a class="btn btn-slim" style="display:none;" id="restorebackup" href="#">Restore Backup</a> <a class="btn btn-slim tooltip tooltip-bottom" id="save_images_to_meta" href="#"><span class="tooltip-container"><span class="tooltip-label">Add image paths to a metafield</span></span>Images to Metafields</a></div>'),
b.setup_rte())):b.notice("ShopifyFD error : setup_custom_collections : target html not found",!0)},get_files:function(a,c){var d=$("#settings-general table");d.length&&(b.notice("Loading files..."),$.ajax({type:"GET",url:"/admin/files.json?limit=50&direction=next&page="+a,success:function(a,f,g){if(a){$("");f=0;for(g=a.files.length;f<g;f++){var h=$("<tr />",{"class":"file_row"}),k=$("<td />"),n=$("<td />"),q=$("<td />"),l=$("<td />",{"class":"tr"}),r=$("<td />"),t=$("<a />",{href:"#","data-src":a.files[f].public_url.replace("http:",
"")});if(-1<a.files[f].content_type.indexOf("image")){t.on("click",function(){var a=$(this);b.fd_modal(!0,'<img src="'+a.attr("data-src")+'" />',"Image Preview",!0);return!1}).text(a.files[f].key.replace("files/",""));var p=a.files[f].public_url.replace(/(\.[^\.]+)$/,"_thumb$1").replace("http:","");k.html('<img src="'+p+'" />');n.append(t);q.html('<input class="select-all-on-focus" value="'+a.files[f].public_url+'">')}else t.attr("href",a.files[f].public_url).attr("target","_blank").text(a.files[f].key.replace("files/",
""));l.html(Math.floor(a.files[f].size/1024)+" kB");h.append(k,n,q,l,r);d.append(h)}f>=c?(b.notice("All loaded"),$(".header-right .segmented").hide()):(++f,b.get_files(f,c))}}}))},setup_files:function(){var a=$(".header-row .header-right").eq(0);if(a.length){var c=$("<ul/>",{"class":"segmented",id:"get_all_images"}),d=$("<li/>"),e=$("<a/>",{"class":"btn",href:"#",style:"margin-left:1em"}).html("Show all files").on("click",function(){var a=$(this);a.addClass("is-loading").attr("style","margin-left:1em;text-indent: -9999px;");
$.ajax({type:"GET",url:"/admin/files.json?limit=2&fields=id",success:function(c,d,e){c&&(c=e.getResponseHeader("X-Total-Results"),50<c?(c=Math.ceil(c/50),b.get_files(2,c)):(b.notice("There are no more to load",!0),a.removeClass("is-loading").attr("style","margin-left:1em")))},error:function(){a.removeClass("is-loading").attr("style","margin-left:1em");b.notice("Error loading files",!0)}});return!1});d.append(e);c.append(d);a.prepend(c)}},setup_settings_general:function(){var a=$("<div>",{id:"general_metafields",
"class":"section description"}),c=$("<div />",{"class":"next-grid"}),d=$("<div />",{"class":"next-grid__cell next-grid__cell--quarter"}),e=$("<div>",{"class":"section-summary"}),f=$("<div>",{"class":"next-grid__cell"});e.html('<h1>Store Metafields</h1><p>Edit your shop level metafields here. Review the <a target="_blank" href="http://docs.shopify.com/themes/liquid-documentation/objects/metafield">Shopify documentation</a> for more info on Metafields.</p>');f.html('<div class="sub_section-summary fadein"><h1>Metafields <span id="metacount" class="animated bounce">0</span></h1><div class="metafield-content content"><i class="ico ico-20 ico-20-loading"></i></div></div>');
d.append(e);c.append(d).append(f);a.append(c);$("#settings-general div.section").eq(0).after(a);a=$("div.metafield-content");b.loadmeta(a,t)},setup_customers:function(){var a=$(".next-card.next-card--aside").eq(1);a.length?(a.after('<div id="customer_meta_box" class="next-card next-card--aside"><div class="box-content p"><div class="sub_section-summary fadein"><h1>Metafields <span id="metacount" class="animated bounce">0</span></h1><div class="metafield-content content"><i class="ico ico-20 ico-20-loading"></i></div></div></div>'),
a=$("div.metafield-content"),b.loadmeta(a,t)):b.notice("ShopifyFD error : setup_customers : target HTML not found")},setup_single_order:function(){var a=$("#order-sidebar");a.length?(a.append('<div id="customer_meta_box" class="next-card next-card--aside"><div class="box-content p"><div class="sub_section-summary fadein"><h1>Metafields <span id="metacount" class="animated bounce">0</span></h1><div class="metafield-content content"><i class="ico ico-20 ico-20-loading"></i></div></div></div>'),a=$("div.metafield-content"),
b.loadmeta(a,t)):b.notice("ShopifyFD error : setup_single_order : target html not found");a=$(".box.box-details").eq(5).find('a[bind-event-click="contactCustomer.show()"]');if(a.length){var c=$("<input />",{value:a.text(),readonly:"readonly","class":"noprint",style:"margin:1em 0"}).on("click",function(){$(this).select()});a.parent().after(c)}},setup_orders:function(){$(".header-row .header-right").eq(0);var a=$(".order.no-wrap a"),b=!1;a.length&&a.append('<div class="bubble ssb hide fadein" style="bottom: 5px;"><div class="bubble-content p"><h3 class="large">Orders</h3><div class="fl pr"><ul class="unstyled"></ul></div></div><footer class="bubble-footer"><div class="bubble-arrow-wrap"><span class="bubble-arrow-border"></span><span class="bubble-arrow"></span></div></footer></div>').css({position:"relative"}).hover(function(){var a=
$(this);b=setTimeout(function(){var b=a.find("ul").eq(0),c=a.attr("href");$("div.bubble").addClass("hide");a.data("order")?a.find("div.bubble").removeClass("hide"):$.ajax({type:"GET",url:c+".json",success:function(c){if(c){for(var f=c.order.line_items,k=c.order.fulfillments,n="",q=0,l=f.length;q<l;q++)n+='<li style="white-space:normal">'+f[q].quantity+" x "+f[q].name+"</li>";c.order.fulfillment_status&&k.length&&(n+='<li style="white-space:normal;border-top: 1px solid #ccc;margin-top: .5em;padding-top: .5em;">Tracking#: <b>'+
k[0].tracking_number+"</b></li>");a.data("order",n);b.html(n);a.find("div.bubble").removeClass("hide")}}})},100)},function(){clearTimeout(b);$(this).find("div.bubble").addClass("hide")})},updatedropdown:function(){var a=r.URL+"/metafields.json";"general"===b.data("omega")&&(a="/admin/metafields.json");"articles"===b.data("alpha")&&(a="/admin/articles/"+b.data("omega")+"/metafields.json");$.getJSON(a,function(a){var d="";a=a.metafields;if(a.length){b.data("m",a);$("#metacount").text(a.length).addClass("active");
for(var e=0,f=a.length;e<f;e++)d+='<option data-type="'+a[e].value_type+'" data-id="'+a[e].id+'">'+a[e].namespace+"."+a[e].key+"</option>",t.metafields[a[e].id]={namespace:a[e].namespace,value:a[e].value,key:a[e].key},"backups"==a[e].namespace&&$("#restorebackup").show();d='<option value="">Select or create a metafield</option>'+d}else $("#metacount").text("0").removeClass("active"),b.data("m",!1),$("#restorebackup").hide(),d='<option value="">Select or create a metafield</option>';$("#metafieldselect").html(d);
b.clearmetaform()})},add_ui:function(){if(0===$("#shopifyJSbar").length){var a=$("body"),c=$("<div>",{id:"shopifyJSbar","class":"loading noprint fadein"}),d=$("<div>",{"class":"wrapper clearfix"}),e=$("<ul>",{id:"shopifyJSnav"});e.html('<li><a id="aboutapp" href="#">About ShopifyFD</a></li><li><a id="togglestyle" href="#" class="tooltip tooltip-bottom"><span class="tooltip-container"><span class="tooltip-label">Toggle ShopifyFD style overrides</span></span>Toggle CSS</a></li><li><a id="bulkmetafields" href="#" class="tooltip tooltip-bottom"><span class="tooltip-container"><span class="tooltip-label">Experimental feature - has limitations</span></span>Bulk Metafields</a></li><li><a href="//freakdesign-us.s3.amazonaws.com/shopify/shopifyFD/freakdesign-shopifyfd-for-shopify-guide.pdf" target="_blank" class="tooltip tooltip-bottom"><span class="tooltip-container"><span class="tooltip-label">Open the help PDF in new window</span></span>Help</a></li><li class="animated delay bounce"><a href="http://shopifyfd.com/#install" target="_blank" class="tooltip tooltip-bottom"><span class="tooltip-container"><span class="tooltip-label">Your support is appreciated.</span></span>Use this free tool? Tip me! ($)</a></li>');
e.find("a").on("click",function(){if(b.isloading())b.notice("We better wait for this page to load first...",!0);else{var a=$(this),c=a.prop("id");if(c)"bulkmetafields"==c?b.bulkmetafields():"togglestyle"==c?(b.toggleStyle(),a.toggleClass("active")):"aboutapp"==c&&b.about_app();else return!0}return!1});d.append(e);c.append(d);a.append(c);c.removeClass("loading")}},load_css:function(){var a=document.createElement("link");a.type="text/css";a.rel="stylesheet";a.id="shopifyjs";a.href="//freakdesign-us.s3.amazonaws.com/shopify/shopifyFD/s/shopifyFD.css";
document.getElementsByTagName("head")[0].appendChild(a)},get_theme_data:function(){b.data("themeID")||$.ajax({type:"GET",url:"/admin/themes.json",success:function(a){if(a)for(var c=0,d=a.themes.length;c<d;c++)"main"===a.themes[c].role&&(b.flog(a.themes[c].id),b.data("themeID",a.themes[c].id),b.data("themeName",a.themes[c].name))}})},setup_announcements:function(){var a=$(".section.first-section").eq(0);if(a.length){var c=a.clone(),d=c.find(".section-summary"),e=d.find("h1").eq(0),f=d.find("p"),g=
c.find(".span18"),h=$("<div />",{"class":"box box-details"}),k=$("<ol />",{"class":"content-index content-index-img-icons"});$.ajax({type:"GET",url:"https://freakdesign-us.s3.amazonaws.com/shopify/shopifyFD/s/announcements.json",dataType:"json",cache:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(b){for(var d=0;d<b.announcements.length;d++){var l=$("<li />",{"class":"content-index__item"}).html("<small>"+b.announcements[d].date+"</small><br><strong>"+b.announcements[d].title+"</strong><p>"+
b.announcements[d].description+"</p>");k.append(l)}e.text("ShopifyFD updates");f.text("Keep up to date with the latest edits and notes.");c.removeClass("first-section").addClass("fadein");g.html("").append(h);h.append(k);a.after(c)},error:function(a,c,d){b.notice(d,!0)}})}},init:function(){b.data("drag_on")&&b.set_drag_drop();$("html").addClass("shopifyJSoverride");b.get_theme_data();setInterval(function(){b.data("content",$("#content"));if(!b.data("content").hasClass("loading")){b.add_ui();var a=
r.URL.split("#")[0].split("?")[0].split("/"),a=a[a.length-2],c=r.URL.split("/").pop();if("next"!==c&&"prev"!==c&&(a!==b.data("alpha")||c!==b.data("omega")))if(b.data("alpha",a),b.data("omega",c),b.flog(b.data("alpha")+","+b.data("omega")),"customers"==b.data("alpha")&&!isNaN(b.data("omega")))b.setup_customers();else if("articles"==b.data("alpha")&&!isNaN(b.data("omega")))b.setup_articles();else if("pages"==b.data("alpha")&&!isNaN(b.data("omega")))b.setup_pages();else if("smart_collections"===b.data("alpha")&&
!isNaN(b.data("omega")))b.setup_custom_collections();else if("custom_collections"===b.data("alpha")&&!isNaN(b.data("omega")))b.setup_custom_collections();else if("collections"===b.data("alpha")&&!isNaN(b.data("omega")))b.setup_custom_collections();else if("blogs"==b.data("alpha")&&!isNaN(b.data("omega")))b.setup_blogs();else if("products"==b.data("alpha"))b.setup_products();else if("admin"==b.data("alpha")&&"products"==b.data("omega"))b.setup_products_list();else if("orders"==b.data("alpha")&&!isNaN(b.data("omega")))b.setup_single_order();
else if("admin"==b.data("alpha")&&"orders"==b.data("omega"))b.setup_orders();else if("admin"==b.data("alpha")&&"collections"==b.data("omega"))b.setup_collections();else if("admin"==b.data("alpha")&&"link_lists"==b.data("omega"))b.setup_link_lists();else if("admin"==b.data("alpha")&&"links"==b.data("omega"))b.setup_link_lists();else if("admin"==b.data("alpha")&&"themes"==b.data("omega"))b.setup_themes();else if("link_lists"==b.data("alpha")&&!isNaN(b.data("omega")))b.setup_link_lists_single();else if("admin"==
b.data("alpha")&&"discounts"==b.data("omega"))b.setup_discounts();else if("settings"==b.data("alpha")&&"general"==b.data("omega"))b.setup_settings_general();else if("settings"!=b.data("alpha")||"files"!=b.data("omega"))"settings"==b.data("alpha")&&"shipping"==b.data("omega")?b.setup_shipping():"settings"==b.data("alpha")&&"taxes"==b.data("omega")||"admin"!=b.data("alpha")||"announcements"!=b.data("omega")||b.setup_announcements()}},b.data("wait"));b.notice("ShopifyFD loaded")},data:function(a,b){if("undefined"===
typeof b)return t[a];t[a]=b},toggleStyle:function(){$("html").toggleClass("shopifyJSoverride")},isloading:function(){return b.data("content").hasClass("loading")}}}();b.load_css();b.init()}else alert("Error. This should be run within the Shopify Admin page.")}else alert("Error. jQuery not found.")})();